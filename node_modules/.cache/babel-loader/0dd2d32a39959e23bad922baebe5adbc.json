{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\2080118\\\\Downloads\\\\mStock-frontend\\\\src\\\\App.js\",\n    _s = $RefreshSig$();\n\nimport logo from './logo.svg';\nimport './App.css';\nimport MenuComponent from './Components/MenuComponent';\nimport LoginComponent from './Components/LoginComponent';\nimport CompanyDetailsComponent from './Components/CompanyDetailsComponent';\nimport CompaniesListComponent from './Components/CompaniesListComponent';\nimport WatchlistComponent from './Components/WatchlistComponent';\nimport PerformanceComponent from './Components/PerformanceComponent';\nimport { BrowserRouter as Router, Switch, Route, Redirect } from 'react-router-dom';\nimport React from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const AuthContext = /*#__PURE__*/React.createContext();\nconst initialState = {\n  isAuthenticated: false,\n  user: null,\n  token: null\n};\n\nconst reducer = (state, action) => {\n  switch (action.type) {\n    case \"LOGIN\":\n      localStorage.setItem(\"user\", action.payload.user);\n      localStorage.setItem(\"token\", action.payload.token);\n      return { ...state,\n        isAuthenticated: true,\n        user: action.payload.user,\n        token: action.payload.token\n      };\n\n    case \"LOGOUT\":\n      localStorage.clear();\n      return { ...state,\n        isAuthenticated: false,\n        user: null\n      };\n\n    default:\n      return state;\n  }\n};\n\nconst ProtectedRoute = _ref => {\n  let {\n    component: Component,\n    authstate: state,\n    ...rest\n  } = _ref;\n  return /*#__PURE__*/_jsxDEV(Route, { ...rest,\n    render: () => {\n      //console.log(localStorage.getItem(\"user\"))\n      if (!state.isAuthenticated) return /*#__PURE__*/_jsxDEV(Redirect, {\n        to: \"/\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 17\n      }, this);else return /*#__PURE__*/_jsxDEV(Component, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 17\n      }, this);\n      console.log(\"Hello2\");\n    }\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 53,\n    columnNumber: 5\n  }, this);\n};\n\n_c = ProtectedRoute;\n\nfunction App() {\n  _s();\n\n  const [state, dispatch] = React.useReducer(reducer, initialState);\n  React.useEffect(() => {\n    const user = JSON.parse(localStorage.getItem('user') || null);\n    const token = JSON.parse(localStorage.getItem('token') || null);\n\n    if (user && token) {\n      dispatch({\n        type: 'LOGIN',\n        payload: {\n          user,\n          token\n        }\n      });\n    }\n  }, []);\n  return /*#__PURE__*/_jsxDEV(Router, {\n    children: /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n      value: {\n        state,\n        dispatch\n      },\n      children: [/*#__PURE__*/_jsxDEV(MenuComponent, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(Switch, {\n        children: [/*#__PURE__*/_jsxDEV(Route, {\n          path: \"/\",\n          exact: true,\n          component: LoginComponent\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 7\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          path: \"/companies\",\n          component: CompaniesListComponent\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 7\n        }, this), /*#__PURE__*/_jsxDEV(ProtectedRoute, {\n          path: \"/watchlist\",\n          authstate: state,\n          component: WatchlistComponent\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(ProtectedRoute, {\n          path: \"/performance\",\n          authstate: state,\n          component: PerformanceComponent\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 6\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 91,\n    columnNumber: 5\n  }, this);\n}\n\n_s(App, \"gZZ3TaNWFnk5pxLxmdKGLDXNo7Y=\");\n\n_c2 = App;\nexport default App;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"ProtectedRoute\");\n$RefreshReg$(_c2, \"App\");","map":{"version":3,"sources":["C:/Users/2080118/Downloads/mStock-frontend/src/App.js"],"names":["logo","MenuComponent","LoginComponent","CompanyDetailsComponent","CompaniesListComponent","WatchlistComponent","PerformanceComponent","BrowserRouter","Router","Switch","Route","Redirect","React","AuthContext","createContext","initialState","isAuthenticated","user","token","reducer","state","action","type","localStorage","setItem","payload","clear","ProtectedRoute","component","Component","authstate","rest","console","log","App","dispatch","useReducer","useEffect","JSON","parse","getItem"],"mappings":"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","sourcesContent":["import logo from './logo.svg';\nimport './App.css';\nimport MenuComponent from './Components/MenuComponent';\nimport LoginComponent from './Components/LoginComponent';\nimport CompanyDetailsComponent from './Components/CompanyDetailsComponent';\nimport CompaniesListComponent from './Components/CompaniesListComponent';\nimport WatchlistComponent from './Components/WatchlistComponent';\nimport PerformanceComponent from './Components/PerformanceComponent';\nimport {BrowserRouter as Router,Switch,Route, Redirect} from 'react-router-dom'\nimport React from 'react'\n\n\nexport const AuthContext = React.createContext();\n\n\n\nconst initialState = {\n  isAuthenticated: false,\n  user: null,\n  token: null,\n};\n\n\nconst reducer = (state, action) => {\n  switch (action.type) {\n    case \"LOGIN\":\n      localStorage.setItem(\"user\", action.payload.user);\n      localStorage.setItem(\"token\", action.payload.token);\n      return {\n        ...state,\n        isAuthenticated: true,\n        user: action.payload.user,\n        token: action.payload.token\n      };\n    case \"LOGOUT\":\n      localStorage.clear();\n      return {\n        ...state,\n        isAuthenticated: false,\n        user: null\n      };\n    default:\n      return state;\n  }\n};\n\n\n\n\nconst ProtectedRoute=({component:Component,authstate:state,...rest})=>{\n\n  return(\n    <Route\n    {...rest}\n    render={()=>\n      {\n        //console.log(localStorage.getItem(\"user\"))\n        if(!state.isAuthenticated)\n         return <Redirect to=\"/\"/>\n         else\n         return <Component />\n         console.log(\"Hello2\")\n      }\n    }\n    />\n  )\n\n}\nfunction App() {\n\n  const [state,dispatch] = React.useReducer(reducer, initialState);\n  \n\n  React.useEffect(() => {\n    const user = JSON.parse(localStorage.getItem('user') || null)\n    const token = JSON.parse(localStorage.getItem('token') || null)\n\n    if(user && token){\n      dispatch({\n        type: 'LOGIN',\n        payload: {\n          user,\n          token\n        }\n      })\n    }\n  }, [])\n\n  \n  return (\n    <Router>\n     <AuthContext.Provider\n      value={{\n        state,\n        dispatch\n      }}\n    >\n      \n      <MenuComponent/>\n      <Switch>\n      <Route path=\"/\" exact component={LoginComponent}/>\n      <Route path=\"/companies\"  component={CompaniesListComponent}/>\n      \n        <ProtectedRoute path=\"/watchlist\" authstate={state} component={WatchlistComponent}/>\n        <ProtectedRoute path=\"/performance\"  authstate={state} component={PerformanceComponent}/>\n      </Switch>\n      \n      </AuthContext.Provider>\n      \n      \n\n    </Router>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}